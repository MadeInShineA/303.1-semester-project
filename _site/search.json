[
  {
    "objectID": "src/sources.html",
    "href": "src/sources.html",
    "title": "Sources",
    "section": "",
    "text": "DIPY website\nDIPY github repository\nDIPY contributing guide\nDIPY developer guide\nDIPY coding style guideline\nTutorials\n\nReconstruct with Constant Solid Angle (Q-Ball)\nReconstruct with Generalized Q-Sampling Imaging\nIntroduction to Basic Tracking\nK-fold cross-validation for model comparison"
  },
  {
    "objectID": "src/sources.html#dipy",
    "href": "src/sources.html#dipy",
    "title": "Sources",
    "section": "",
    "text": "DIPY website\nDIPY github repository\nDIPY contributing guide\nDIPY developer guide\nDIPY coding style guideline\nTutorials\n\nReconstruct with Constant Solid Angle (Q-Ball)\nReconstruct with Generalized Q-Sampling Imaging\nIntroduction to Basic Tracking\nK-fold cross-validation for model comparison"
  },
  {
    "objectID": "src/sources.html#youtube-videos",
    "href": "src/sources.html#youtube-videos",
    "title": "Sources",
    "section": "Youtube videos",
    "text": "Youtube videos\n\nDIPY Workshop 2021 Playlist\nDiffusion Weighted Imaging - Doctor Klioze\nDiffusion Tensor Imaging (DTI) - Doctor Klioze\nDiffusion Tensor Imaging (DTI) Explained! | Neuroscience Methods 101 - Psyched!\nDWI vs ADC MRI sequences: EXPLAINED - Radiology Tutorials\nDiffusion Weighted Imaging EXPLAINED (DWI Trace, ADC, B-Values) | MRI Physics Course Lecture 14 - MRI Physics EXPLAINED\nHow to Read MRI Diffusion Imaging (DWI) like a Real Radiologist - MRI Physics EXPLAINED\nA tour of spherical harmonics-based local reconstruction techniques in DIPY - Part1 - Diffusion Imaging in Python - DIPY\nA tour of spherical harmonics-based local reconstruction techniques in DIPY - Part2 - Diffusion Imaging in Python - DIPY"
  },
  {
    "objectID": "src/sources.html#scientific-papers",
    "href": "src/sources.html#scientific-papers",
    "title": "Sources",
    "section": "Scientific Papers",
    "text": "Scientific Papers\n\nYeh, Wedeen, and Tseng (2010)\nBen-Amitay, Jones, and Assaf (2012)"
  },
  {
    "objectID": "src/sources.html#assistants",
    "href": "src/sources.html#assistants",
    "title": "Sources",
    "section": "Assistants",
    "text": "Assistants\n\nQwen3 Max\nGrok Code Fast 1"
  },
  {
    "objectID": "src/sources.html#other",
    "href": "src/sources.html#other",
    "title": "Sources",
    "section": "Other",
    "text": "Other\n\nNipreps book\nProf. Esteban DIPY pull request\nProf. Esteban DIPY fork\nMarimo website\nQuarto website\nGraphviz website"
  },
  {
    "objectID": "src/sources.html#references",
    "href": "src/sources.html#references",
    "title": "Sources",
    "section": "References",
    "text": "References\n\n\nBen-Amitay, Shani, Derek K. Jones, and Yaniv Assaf. 2012. “Motion Correction and Registration of High b-Value Diffusion Weighted Images.” Magnetic Resonance in Medicine 67 (6): 1694–1702. https://doi.org/https://doi.org/10.1002/mrm.23186.\n\n\nYeh, Fang-Cheng, Van Jay Wedeen, and Wen-Yih Isaac Tseng. 2010. “Generalized \\({q}\\)-Sampling Imaging.” IEEE Transactions on Medical Imaging 29 (9): 1626–35. https://doi.org/10.1109/TMI.2010.2045126."
  },
  {
    "objectID": "src/index.html",
    "href": "src/index.html",
    "title": "303.1 Semester Project:Extending DIPY’s Generalized Q-ball Imaging model to make predictions",
    "section": "",
    "text": "This semester project focuses on advancing diffusion MRI analysis by contributing to the DIPY library. Specifically, it extends the Generalized Q-Sampling Imaging (GQI) model with a new predict function that enables signal reconstruction and prediction for unseen gradient configurations. Through rigorous implementation, testing, and documentation, the project aims to enhance DIPY’s capabilities in neuroimaging research."
  },
  {
    "objectID": "src/index.html#project-overview",
    "href": "src/index.html#project-overview",
    "title": "303.1 Semester Project:Extending DIPY’s Generalized Q-ball Imaging model to make predictions",
    "section": "Project Overview",
    "text": "Project Overview\nThis project is part of the 303.1 semester project course.\nThe goal is to contribute to the DIPY framework by extending the Generalized Q-ball Imaging (GQI) model with predictive capabilities.\nThe key objectives are:\n\nImplementing a predict() function to the GeneralizedQSamplingFit class\nThoroughly documenting the new code\nProviding comprehensive and meaningful tests\nGetting the prediction pull request accepted by DIPY\n\nThe project has progressed to the point where a pull request has been submitted to the DIPY repository for integrating the new predict function. This pull request is currently under review by the DIPY development team, and feedback is being incorporated to ensure it meets the library’s standards and requirements. You can track the progress at DIPY Pull Request #1."
  },
  {
    "objectID": "src/index.html#project-timeline",
    "href": "src/index.html#project-timeline",
    "title": "303.1 Semester Project:Extending DIPY’s Generalized Q-ball Imaging model to make predictions",
    "section": "Project Timeline",
    "text": "Project Timeline\nThe following Gantt diagram provides a visual overview of the project schedule, highlighting completed tasks, active work, and upcoming milestones. It tracks progress from initial research and development through testing, documentation, and final submissions.\n\n\n\n\n\n\ngantt\n\n    title Semester Project Gantt Diagram\n    dateFormat DD.MM.YYYY\n    axisFormat %d.%m\n\n    section Background\n        Literature review (DWI, GQI, MRI)       :done,         research,       24.11.2025, 2d\n        Study Nipreps book (DWI preprocessing)  :done,         nipreps,        24.11.2025, 3d\n\n    section Development\n        Dev environment setup                   :done,         devenv,         25.11.2025, 1d\n        Study GQI codebase                      :done,         codebase,       25.11.2025, 3d\n        Create baseline prediction tests        :done,         simple_tests,   26.11.2025, 2d\n        Develop Marimo validation notebooks     :done,         notebooks,      26.11.2025, 2d\n        Implement roundtrip voxel prediction test :done,       cross_tests,    01.12.2025, 2d\n        Create unseen data prediction notebook  :done,         unseen_data,    03.12.2025, 4d\n        Add the GQI predict example to dipy doc :done,         predict_example,04.12.2025, 11.12.2025\n        Create prediction_kernel tests          :done,         prediction_kernel ,07.12.2025, 2d\n        Double check the existing tests         :done,         dc_test,          09.12.2025, 1d\n        Double check the existing notebooks     :done,         dc_notebooks,   09.12.2025, 1d\n        Coordinate with DIPY experts            :done,         coor,           10.12.2025, 12.12.2025\n        Fine tune the code for the DIPY PR based on feedback      :active,        prpr,           12.12.2025, 16.12.2025\n        \n\n      \n        \n\n    section Milestones & &lt;br&gt;Deliverables\n        Prof. Esteban – Kickoff meeting         :done,         milestone,      25.11.2025, 0d\n        Prof. Esteban – Progress check-in       :done,         milestone,      27.11.2025, 0d\n        Create Gantt diagram                    :done,         gantt,          28.11.2025, 1d\n        Design impact slide                     :done,         impact,         28.11.2025, 1d\n        Draft report outline                    :done,         r_draft,        01.12.2025, 1d\n        Prof. Esteban - Second progress check-in:done,         milestone,      03.12.2025, 0d\n        Create presentation dwi slide           :done,         p_draft,        06.12.2025, 09.12.2025 \n        Prof. Esteban - Third progress check-in :done,         milestone,      09.12.2025, 0d\n        PR on Prof. Esteban repository          :done,         milestone,      10.12.2025, 0d\n        PR on DIPY repository                   :done,         milestone,      11.12.2025, 0d\n        Finish report                           :active,       f_rep,          11.12.2025, 16.12.2025\n        Finish presentation                     :active,       f_pres,         11.12.2025, 18.12.2025\n        Code and documentation handout          :crit,         milestone,      16.12.2025, 0d\n        Final presentation                      :crit,         milestone,      18.12.2025, 0d\n\n\n\n\n\n\n```"
  },
  {
    "objectID": "src/index.html#key-achievements",
    "href": "src/index.html#key-achievements",
    "title": "303.1 Semester Project:Extending DIPY’s Generalized Q-ball Imaging model to make predictions",
    "section": "Key Achievements",
    "text": "Key Achievements\nThe project has made significant progress towards its objectives:\n\nImplementation Complete: Successfully implemented the predict function for the GeneralizedQSamplingFit class, along with the supporting prediction_kernel helper function.\nComprehensive Testing: Developed thorough unit tests and integration tests, including roundtrip validation and generalization to unseen data, ensuring numerical stability and accuracy.\nDocumentation and Examples: Created detailed notebooks demonstrating the functionality, including tutorials and validation scripts, with results showing high correlation coefficients (r &gt; 0.97) in signal reconstruction.\nCommunity Contribution: Submitted a pull request to the DIPY repository, which is currently under review. Coordinated with DIPY experts to align with library standards.\nDeliverables in Progress: Finalizing the technical report, presentation, and documentation handouts for the semester project submission."
  },
  {
    "objectID": "src/index.html#project-documents-and-resources",
    "href": "src/index.html#project-documents-and-resources",
    "title": "303.1 Semester Project:Extending DIPY’s Generalized Q-ball Imaging model to make predictions",
    "section": "Project Documents and Resources",
    "text": "Project Documents and Resources\nAccess the key deliverables and supplementary materials for this project:\n\nImplementation Report: Comprehensive technical documentation covering the predict function implementation, mathematical foundations, testing methodology, results analysis, and extra resources for further exploration.\nPresentation Slides: Slide deck summarizing the project objectives, methodology, achievements, and future implications.\nDaily Journal: Chronological log of development activities, challenges encountered, and progress updates throughout the semester.\nSources and References: Bibliography, citations, and additional reading materials related to diffusion MRI, GQI, and DIPY.\n\nFor results examples and code demonstrations, refer to the notebooks and examples linked in the Implementation Report."
  },
  {
    "objectID": "src/report.html",
    "href": "src/report.html",
    "title": "Implementation Report: Predict Function",
    "section": "",
    "text": "This report provides an overview of the proposed predict function’s implementation in DIPY’s Generalized Q-Sampling Imaging (GQI) model, including the newly implemented prediction_kernel and the pre-existing gqi_kernel helper functions.\nIt covers their purpose, operational mechanics, mathematical foundations, testing methodology, and obtained results."
  },
  {
    "objectID": "src/report.html#introduction",
    "href": "src/report.html#introduction",
    "title": "Implementation Report: Predict Function",
    "section": "",
    "text": "This report provides an overview of the proposed predict function’s implementation in DIPY’s Generalized Q-Sampling Imaging (GQI) model, including the newly implemented prediction_kernel and the pre-existing gqi_kernel helper functions.\nIt covers their purpose, operational mechanics, mathematical foundations, testing methodology, and obtained results."
  },
  {
    "objectID": "src/report.html#the-different-needed-helper-functions",
    "href": "src/report.html#the-different-needed-helper-functions",
    "title": "Implementation Report: Predict Function",
    "section": "2 The different needed helper functions",
    "text": "2 The different needed helper functions\nThe predict function implementation relies on two key helper functions:\n\ngqi_kernel (pre-existing) for kernel computation\nprediction_kernel (newly implemented) for pseudo-inverse calculation.\n\nIn this section, each function is described in detail, including its purpose, parameters, and role in signal reconstruction from ODFs.\n\n2.1 The gqi_kernel function\nThe gqi_kernel function calculates the Generalized Q-Sampling Imaging (GQI) transformation kernel, which is essential for modeling diffusion signals in terms of orientation distribution functions (ODFs). This kernel transforms gradient directions and b-values into a matrix that relates diffusion signals to ODFs on a spherical grid.\n\nPurpose: Computes the kernel matrix for GQI-based signal reconstruction. It handles different GQI methods (standard or gqi2) and incorporates physical constants like the free water diffusion coefficient.\nKey Parameters:\n\ngtab: GradientTable containing b-values and b-vectors.\nparam_lambda: Regularization parameter for the kernel.\nsphere: Spherical grid for ODF sampling.\nmethod: Specifies the GQI variant (standard by default).\n\nOperation: Scales b-vectors by a diffusion-related factor, computes dot products with sphere vertices, and applies sinc or squared radial functions to generate the kernel.\n\ndef gqi_kernel(gtab, param_lambda, sphere, method=\"standard\"):\n    # 0.01506 = 6*D where D is the free water diffusion coefficient\n    # l_values sqrt(6 D tau) D free water diffusion coefficient and\n    # tau included in the b-value\n    scaling = np.sqrt(gtab.bvals * 0.01506)\n    b_vector = gtab.bvecs * scaling[:, None]\n\n    if method == \"gqi2\":\n        H = squared_radial_component\n        return np.real(H(np.dot(b_vector, sphere.vertices.T) * param_lambda))\n    elif method != \"standard\":\n        warnings.warn(\n            f'GQI model \"{method}\" unknown, falling back to \"standard\".',\n            stacklevel=1,\n        )\n    return np.real(np.sinc(np.dot(b_vector, sphere.vertices.T) * param_lambda / np.pi))\nMathematically, the GQI kernel \\(K\\) is computed as:\nFor the standard method: \\[\nK_{ij} = \\frac{\\sin\\left( \\lambda (\\mathbf{q}_i \\cdot \\mathbf{v}_j) \\right)}{\\lambda (\\mathbf{q}_i \\cdot \\mathbf{v}_j)} = \\operatorname{sinc}\\left( \\frac{\\lambda (\\mathbf{q}_i \\cdot \\mathbf{v}_j)}{\\pi} \\right)\n\\] Where:\n\n\\(\\mathbf{q}_i = \\mathbf{g}_i \\sqrt{b_i \\cdot 0.01506}\\) (scaled gradient)\n\\(\\mathbf{v}_j\\) are sphere vertices\n\\(\\lambda\\) is the regularization parameter\n\\(\\operatorname{sinc}(x) = \\frac{\\sin(\\pi x)}{\\pi x}\\) is the NumPy’s normalized sinc function.\n\nFor the gqi2 method: \\[\nK_{ij} = \\operatorname{Re}\\left[ H\\left( \\lambda (\\mathbf{q}_i \\cdot \\mathbf{v}_j) \\right) \\right]\n\\] Where \\(H\\) is the squared radial component function (see eq.8 in the referenced paper Yeh, Wedeen, and Tseng 2010)\n\n\n2.2 The prediction_kernel function\nThe prediction_kernel function computes the Tikhonov-regularized Moore-Penrose pseudo-inverse of the GQI kernel, enabling signal reconstruction from orientation distribution functions (ODFs) in the DIPY convention.\n\nPurpose: Generates the Tikhonov-regularized pseudo-inverse kernel for solving S from \\(ODF = S \\cdot K\\), using regularization for numerical stability.\nKey Parameters:\n\ngtab: GradientTable for the prediction.\nparam_lambda: gqi_kernel regularization parameter.\nsphere: Spherical grid.\nmethod: GQI method.\n\nOperation: Computes the GQI kernel \\(K\\), forms \\(K \\cdot K^{T}\\), adds regularization, inverts the matrix, and multiplies by \\(K^{T}\\) to produce the Tikhonov-regularized Moore-Penrose pseudo-inverse kernel.\n\nINVERSE_LAMBDA = 1e-6\n\ndef prediction_kernel(gtab, param_lambda, sphere, method=\"standard\"):\n    # K.shape = (n_gradients, n_vertices)\n    K = gqi_kernel(gtab, param_lambda, sphere, method=method)\n\n    # GTG.shape = (n_gradients, n_gradients)\n    GtG = K @ K.T\n    identity = np.eye(GtG.shape[0])\n\n    # K_plus.shape = (n_vertices, n_gradients)\n    return K.T @ np.linalg.inv(GtG + INVERSE_LAMBDA * identity)\nMathematically, the prediction kernel \\(K^{+}\\) is computed as: \\[\nK^{+} = K^T (K K^T + \\lambda I)^{-1}\n\\] Where:\n\n\\(K\\) is the GQI kernel from gqi_kernel\n\\(\\lambda\\) is the regularization parameter (INVERSE_LAMBDA)\n\\(I\\) is the identity matrix.\n\nThe Tikhonov regularization term (\\(\\lambda I\\)) is added to improve numerical stability and prevent overfitting. The plain Moore-Penrose pseudo-inverse, computed as \\(K^T (K K^T)^{-1}\\), can be unstable for ill-conditioned matrices, amplifying noise in the diffusion signals. Regularization provides a smoother, more robust solution by balancing fidelity to the data with stability."
  },
  {
    "objectID": "src/report.html#the-predict-function-and-its-implementation",
    "href": "src/report.html#the-predict-function-and-its-implementation",
    "title": "Implementation Report: Predict Function",
    "section": "3 The predict function and it’s implementation",
    "text": "3 The predict function and it’s implementation\nThe target predicted signal is given by the following relationship \\[\n   \\begin{alignat*}{2}\n             &ODF                      &&= S \\cdot K \\\\\n  \\iff\\quad & ODF \\cdot K^{+}          &&\\approx S \\cdot K \\cdot K^{+} \\\\\n  \\iff\\quad & ODF \\cdot K^{+}          &&\\approx S \\\\\n  \\iff\\quad & S                        &&\\approx ODF \\cdot K^{+}\n  \\end{alignat*}\n  \\]\nWhere \\(K^{+}\\) is the Tikhonov-regularised Moore-Penrose pseudo-inverse of the GQI kernel \\(K\\).\nNote that the pseudo-inverse is needed since the GQI kernel \\(K\\)’s dimensions are \\((n_\\mathrm{gradients}, n_\\mathrm{vertices})\\), which means it’s (most of the time) not a square matrix and therefore not having a true inverse.\nThe predict function reconstructs diffusion signals from the fitted signal data by fusing the model kernel and the pseudo-inverse kernel to avoid explicit ODF computation.\n\nPurpose: Predicts diffusion-weighted signals from fitted data, supporting both single-voxel and multi-voxel data.\nKey Parameters:\n\ngtab: GradientTable for which to predict signals.\nS0: Optional baseline signal (not used in this implementation).\n\nOperation: Fuses the model kernel and prediction kernel to avoid explicit \\(ODF\\) computation: combined_kernel = \\(K_\\mathrm{model}^T \\cdot K^+\\), then predicted = data @ combined_kernel. Handles data reshaping for matrix operations and ensures non-negative outputs by clamping values.\n\ndef predict(self, gtab, *, S0=None):\n    # K_plus.shape = (n_vertices, n_gradients)\n    K_plus = prediction_kernel(\n        gtab,\n        self.model.Lambda,\n        self.model.sphere,\n        self.model.method,\n    )\n\n    # Fuse kernel and prediction kernel to avoid explicit ODF computation:\n    # combined_kernel.shape = (n_gradients_original, n_gradients)\n    combined_kernel = self.model.kernel.T @ K_plus\n\n    # Handle both 1D (single voxel) and multi-dimensional data\n    if self.data.ndim == 1:\n        # Single voxel: data = (self.model.n_gradients,)\n\n        # predicted.shape = (n_gradients, )\n        predicted = self.data @ combined_kernel\n    else:\n        # Multi-voxel: data = (..., self.model.n_gradients)\n        original_shape = self.data.shape\n        data_2d = self.data.reshape(-1, original_shape[-1])\n\n        # predicted_2d.shape = (n_voxels, n_gradients)\n        predicted_2d = data_2d @ combined_kernel\n\n        # predicted.shape = (..., n_gradients)\n        predicted = predicted_2d.reshape(\n            original_shape[:-1] + (combined_kernel.shape[1],)\n        )\n\n    # Clamp to non-negative values\n    return np.maximum(predicted, 0)\nMathematically, the predicted signal \\(\\mathbf{S}_\\mathrm{pred}\\) is computed as: \\[\n\\mathbf{S}_\\mathrm{pred} = \\max(0, \\mathrm{ODF} \\cdot K^{+})\n\\] Where:\n\n\\(\\mathrm{ODF} = K_\\mathrm{model} \\cdot \\mathbf{S}_\\mathrm{data}\\) is the ODF computed from the fitted signal data\n\\(K^{+}\\) is the pseudo-inverse kernel from prediction_kernel\n\nEquivalently, this can be computed directly as \\(\\mathbf{S}_\\mathrm{pred} = \\max(0, \\mathbf{S}_\\mathrm{data} \\cdot (K_\\mathrm{model}^T \\cdot K^{+}))\\) to avoid intermediate ODF calculation for efficiency.\nThe \\(\\max\\) operation ensures non-negative signal values."
  },
  {
    "objectID": "src/report.html#testing-methodology",
    "href": "src/report.html#testing-methodology",
    "title": "Implementation Report: Predict Function",
    "section": "4 Testing Methodology",
    "text": "4 Testing Methodology\nThe testing methodology for the GQI prediction functions encompasses unit tests for individual components and integration tests for end-to-end prediction workflows.\nThis tests validate:\n\nmathematical correctness\nnumerical stability\npractical usability across single and multi-voxel scenarios.\n\nAll tests utilize DIPY’s test data small_101D1 and simulated diffusion MRI datasets with known properties to ensure robustness.\n\n4.1 prediction_kernel function tests\nThe prediction_kernel function is tested for its role as a Tikhonov-regularized Moore-Penrose pseudo-inverse of the GQI kernel. Key validations include:\n\nShape and finiteness: Ensures the kernel has correct dimensions \\((n_\\mathrm{vertices}, n_\\mathrm{gradients})\\) and contains only finite values, with at least one non-zero value.\nPseudo-inverse properties: Verifies that \\(K K^+ K \\approx K\\) (regularized reconstruction), and that \\(K K^+\\) and \\(K^+ K\\) are symmetric matrices.\nMethod compatibility: Tests both standard and gqi2 GQI methods using the symmetric724 sphere and DSI gradient table.\n\nThese tests confirm the kernel’s mathematical integrity and numerical stability for signal reconstruction.\n\n\n4.2 Basic API predict function tests\nBasic prediction tests validate the predict function’s API and output characteristics for both single-voxel and multi-voxel data:\n\nSingle-voxel test: Fit the model to individual voxels from DSI data, predict signals, and check that outputs are non-negative arrays matching the gradient table length. It also includes predictions on subsets of gradients.\nMulti-voxel test: Fit the model to entire 3D volumes, predict signals, and verify shape preservation and non-negativity. Subset gradient predictions are also tested.\nMethod coverage: Both standard and gqi2 methods are tested to ensure consistent behavior.\n\nThese tests ensure the prediction function handles various data shapes and gradient configurations correctly.\n\n\n4.3 Round trip predict function tests\nRound-trip tests assess the fidelity of signal reconstruction by fitting the model to training data (excluding b0 volumes) and predicting back to the same gradient table.\nThese tests are performed exclusively on the standard GQI model. Correlation between original and predicted signals serves as a quality metric.\n\nSingle-voxel round-trip: For selected voxels, compute Pearson correlation between original and predicted signals. Assert correlations exceed \\(r &gt; 0.8\\) and signal magnitudes remain in the same order of magnitude.\nMulti-voxel round-trip: Compute average correlation across all voxels in the volume, requiring \\(\\bar{r} &gt; 0.8\\). Identify and reject any voxels with \\(r \\leq 0.8\\).\n\nThese tests quantify reconstruction accuracy and detect underfitting or numerical instabilities."
  },
  {
    "objectID": "src/report.html#obtained-results",
    "href": "src/report.html#obtained-results",
    "title": "Implementation Report: Predict Function",
    "section": "5 Obtained Results",
    "text": "5 Obtained Results\nBuilding on the testing methodology outlined above, the obtained results validate the implementation using real DSI data from the DIPY library. They demonstrate high accuracy in signal reconstruction and generalization, quantified by voxel-wise correlation metrics and visual comparisons against ground truth data.\nIn the following subsections, we present the results for single-voxel and multi-voxel roundtrip predictions, followed by generalization to unseen data.\n\n5.1 Single-Voxel Reconstruction Results\nResults from the single-voxel roundtrip test on the small_101D dataset are presented here, focusing on signal reconstruction for a representative voxel.\n\n\n\n\n\n\nFigure 1: Voxel (0, 0, 0) Signal Reconstruction: Original vs. Predicted\n\n\n\nThe plots in Figure 1 provide a detailed analysis for a single representative voxel.\n\nStrong Linear Relationship: The scatter plot on the left shows a strong positive linear relationship between the original and predicted signals, with a Pearson correlation coefficient of \\(r = 0.9744\\). The fitted line \\(y = 0.87x + 13.65\\) closely tracks the identity line (dashed black), indicating minimal bias in the prediction.\nSignal Profile Fidelity: The line plot on the right compares the signal intensity profiles across all gradient directions. The predicted signal (in blue) closely follows the original signal (in black). The residual plot (in gray) shows small deviations, with an \\(MAE\\) of \\(12.7544\\), which is acceptable given the signal range (~0-300).\n\nThese results demonstrate the effectiveness of the predict function for single-voxel predictions.\nFor the complete single-voxel roundtrip analysis, refer to the GQI Roundtrip notebook.\n\n\n5.2 Multi-Voxel Reconstruction Results\nThe multi-voxel roundtrip test on the small_101D dataset evaluates reconstruction accuracy across the entire volume, with results shown below.\n\n\n\n\n\n\nFigure 2: Voxel-wise Signal Reconstruction Accuracy\n\n\n\nThe histogram presented in Figure 2 shows the distribution of Pearson correlation coefficients between original and predicted signals across all voxels for the “Standard GQI” model.\n\nHigh Overall Fidelity: The distribution is sharply peaked near perfect correlation (\\(r=1.0\\)), indicating the model successfully reconstructs the training data.\nQuantitative Metrics: The mean voxel-wise correlation is \\(0.9800\\), and the overall correlation across the entire volumes is \\(0.9749\\), both significantly exceeding the target thresholds of \\(r &gt; 0.8\\). and \\(\\bar{r}&gt;0.8\\). The \\(MAE\\) of \\(7.1714\\) further confirms low prediction error relative to the signal intensity scale.\nSpatial Consistency: The accompanying correlation map (right panel) shows a uniformly high correlation (yellow tones) across the middle slice, confirming that the model’s performance is spatially consistent and not localized to specific regions.\n\nThis validates the numerical stability and robustness of the predict function for multi-voxel data.\nSee the GQI Roundtrip notebook for detailed multi-voxel implementation.\n\n\n5.3 Prediction on Unseen Data\nTo illustrate generalization, this section shows predictions for unseen gradient configurations using the taiwan_ntu_dsi2 dataset\n\n\n\n\n\n\nFigure 3: Real vs Predicted Signal and Local Correlation: Test Volume 0, Z Slice 30\n\n\n\nThe visualization in Figure 3 evaluates the model’s ability to generalize to unseen gradient configurations.\n\nVisual Agreement: A side-by-side comparison of the Real data and standard prediction for a specific b value and b vector shows a strong qualitative match. The predicted image successfully captures the anatomical structure and intensity variations present in the real data, including bright white matter tracts.\nLocal Correlation Validation: The Local Pearson Correlation map, computed over a 9x9 window, quantifies this agreement. The map displays predominantly red and orange regions (correlation &gt; 0.5), indicating good local correspondence between the real and predicted signals. While some areas show lower correlation (blue/purple), these are likely associated with complex fiber crossings or noise, which is expected in diffusion MRI.\n\nThis demonstrates the model’s capability to predict signals for new, unseen gradients beyond the training set.\nThe full unseen prediction workflow is available in the GQI Unseen Data notebook.\nThese results collectively confirm that the implemented predict function is mathematically sound, numerically stable, and practically effective for both reconstructing training data and generalizing to new gradient directions. The high correlation values and visual fidelity validate the correctness of the Tikhonov-regularized pseudo-inverse approach used in the prediction_kernel function."
  },
  {
    "objectID": "src/report.html#conclusion",
    "href": "src/report.html#conclusion",
    "title": "Implementation Report: Predict Function",
    "section": "6 Conclusion",
    "text": "6 Conclusion\nIn summary, the implementation of the predict function for DIPY’s GQI model has been successfully validated through comprehensive testing on real DSI datasets. The function accurately reconstructs diffusion signals for both single-voxel and multi-voxel scenarios, as evidenced by high correlation coefficients and low mean absolute errors in roundtrip tests.\nFurthermore, it demonstrates strong generalization capabilities to unseen gradient configurations, confirming its practical utility in diffusion MRI analysis. The Tikhonov-regularized pseudo-inverse approach ensures numerical stability and robustness, providing a reliable tool for signal prediction in advanced neuroimaging workflows."
  },
  {
    "objectID": "src/report.html#extra-resources",
    "href": "src/report.html#extra-resources",
    "title": "Implementation Report: Predict Function",
    "section": "7 Extra Resources",
    "text": "7 Extra Resources\nThis section contains extra resources to go deeper into the topics covered in this report.\n\n7.1 DIPY Tutorial Notebooks\nThese notebooks were created based off the DIPY documentation examples for this project.\n\nReconstruct with Constant Solid Angle (Q-Ball)\nReconstruct with Generalized Q-Sampling Imaging\nIntroduction to Basic Tracking\n\n\n\n7.2 Project-Specific Notebooks\nThese notebooks were developed specifically for this project to demonstrate the predict function implementation, validation, and application.\n\nGQI Roundtrip Notebook\nGQI Predict Unseen Data Notebook"
  },
  {
    "objectID": "src/report.html#references",
    "href": "src/report.html#references",
    "title": "Implementation Report: Predict Function",
    "section": "8 References",
    "text": "8 References\n\n\nYeh, Fang-Cheng, Van Jay Wedeen, and Wen-Yih Isaac Tseng. 2010. “Generalized \\({q}\\)-Sampling Imaging.” IEEE Transactions on Medical Imaging 29 (9): 1626–35. https://doi.org/10.1109/TMI.2010.2045126."
  },
  {
    "objectID": "src/report.html#footnotes",
    "href": "src/report.html#footnotes",
    "title": "Implementation Report: Predict Function",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nThe small_101D dataset is a small subset of diffusion spectrum imaging (DSI) data from DIPY, containing 101 diffusion-weighted volumes.↩︎\nThe taiwan_ntu_dsi dataset is a full DSI acquisition from the National Taiwan University, consisting of 515 diffusion-weighted volumes.↩︎"
  },
  {
    "objectID": "src/daily_journal.html",
    "href": "src/daily_journal.html",
    "title": "Daily Journal",
    "section": "",
    "text": "Made a pull request to the Nipreps book repo\nRealised the different DIPY tutorials\nStarted reading the Nipreps book"
  },
  {
    "objectID": "src/daily_journal.html#section",
    "href": "src/daily_journal.html#section",
    "title": "Daily Journal",
    "section": "",
    "text": "Made a pull request to the Nipreps book repo\nRealised the different DIPY tutorials\nStarted reading the Nipreps book"
  },
  {
    "objectID": "src/daily_journal.html#section-1",
    "href": "src/daily_journal.html#section-1",
    "title": "Daily Journal",
    "section": "25.11.2025",
    "text": "25.11.2025\n\nMeeting with Prof. Esteban\nPrepared the DIPY development environment\n\nInstallation steps\n\nCreate a venv and source it (or use uv venv and uv pip …)\nTo build the project\n\nsudo dnf install python3-devel\npip install -r requirements/build.txt\npip install –no-build-isolation -e .\n\nTo build the documentation\n\npip install sphinx\npip install sphinx_gallery\npip install numpydoc\npip install sphinxcontrib-bibtex\npip install sphinx-design\npip install grg-sphinx-theme\n\nTo use the correct formatting\n\npip install –no-build-isolation -e .[style]\npip install pre-commit\npre-commit install\n\n\n\nStarted to look at the current gqi predict code and pull request\nContinued reading the Nipreps book (tried to fix a latex rendering error unsuccessfully)"
  },
  {
    "objectID": "src/daily_journal.html#section-2",
    "href": "src/daily_journal.html#section-2",
    "title": "Daily Journal",
    "section": "26.11.2025",
    "text": "26.11.2025\n\nFinished reading the Nipreps book\nContinued to look at the current gqi code and made small changes on the enh/gqi-predict-dev branch\n\nChanged GeneralizedQSamplingFit odf function to take a sphere parameter (see commit)\nChanged the GeneralizedQSamplingFit predict function to use clamping to remove negative value predictions (see commit)\n\nCreated a small marimo notebook to test and understand the prediction function on the enh/gqi-predict-notebooks branch (see commit)"
  },
  {
    "objectID": "src/daily_journal.html#section-3",
    "href": "src/daily_journal.html#section-3",
    "title": "Daily Journal",
    "section": "27.11.2025",
    "text": "27.11.2025\n\nChanged the GeneralizedQSamplingFit predict function to use the model mode when calling the predict_kernel function. Also made the predict function work for multi-voxels (see commit)\nStarted gqi predict tests with (see commit)\n\nSingle-voxel basic test\nSingle-voxel meaningful test\nMulti-voxel basic test\nMulti-voxel meaningful test\n\nMeeting with Prof. Esteban\nDid 2 marimo notebooks on the enh/gqi-predict-notebooks branch (see commit)\n\nA notebook regarding the roundtrip predictions on already seen data (see notebook)\nA notebook regarding cross voxel predictions (see notebook)\n\nCreated the 303.1-semester-project github page (see page)"
  },
  {
    "objectID": "src/daily_journal.html#section-4",
    "href": "src/daily_journal.html#section-4",
    "title": "Daily Journal",
    "section": "28.11.2025",
    "text": "28.11.2025\n\nCreated the Gantt diagram\nCreated the presentation github repository(now removed)\nStarted the presentation\nPublished the presentation github page (see page)"
  },
  {
    "objectID": "src/daily_journal.html#section-5",
    "href": "src/daily_journal.html#section-5",
    "title": "Daily Journal",
    "section": "01.12.2025",
    "text": "01.12.2025\n\nStarted working on the cross validation prediction test\nWorked on the project documentation (see documentation)\n\nAdded a quarto theme\nAdded sources + daily diary pages\nAdded mermaid Gantt diagram\nWorked on the report structure (see report)"
  },
  {
    "objectID": "src/daily_journal.html#section-6",
    "href": "src/daily_journal.html#section-6",
    "title": "Daily Journal",
    "section": "02.12.2025",
    "text": "02.12.2025\n\nAdded unseen data prediction tests + Cleaned gqi predict functions and existing tests (see commit)\nRefactored the gqi predict and prediction_kernel functions to work according to DIPY’s ODF formula:\n\\(ODF = S \\cdot K\\) (see commit)\nWrote the The different needed helper functions and The predict function and it’s implementation sections in the report (see commit)"
  },
  {
    "objectID": "src/daily_journal.html#section-7",
    "href": "src/daily_journal.html#section-7",
    "title": "Daily Journal",
    "section": "03.12.2025",
    "text": "03.12.2025\n\nMeeting with Prof. Esteban\nStarted working on the unseen data prediction notebook (see commit)"
  },
  {
    "objectID": "src/daily_journal.html#section-8",
    "href": "src/daily_journal.html#section-8",
    "title": "Daily Journal",
    "section": "04.12.2025",
    "text": "04.12.2025\n\nContinued working on the unseen data prediction notebook (see commit and notebook)\nBegan the DIPY prediction documentation example (see commit)\nRevised predict function according to DIPY conventions (not pushed yet)"
  },
  {
    "objectID": "src/daily_journal.html#section-9",
    "href": "src/daily_journal.html#section-9",
    "title": "Daily Journal",
    "section": "06.12.2025",
    "text": "06.12.2025\n\nAdded brain mask + interceptor + b0 volumes separation to gqi_unseen_data_notebook (see commit and notebook)\nCommented the shapes of the GeneralizedQSamplingFit predict and prediction_kernel functions (see commit)\nOptimized the predict multi voxel case a bit (see commit)\nUpdated the report"
  },
  {
    "objectID": "src/daily_journal.html#section-10",
    "href": "src/daily_journal.html#section-10",
    "title": "Daily Journal",
    "section": "07.12.2025",
    "text": "07.12.2025\n\nOptimized GeneralizedQSamplingFit prediction_kernel function + Added prediction_kernel test which tests: (see commit)\n\nCorrect output shape\nK @ K_plus @ K ≈ K\nK @ K_plus is symmetric\nK_plus @ K is symmetric\n\nMade GeneralizedQSamplingFit predict function faster by fusing kernels therefore avoiding the explicit ODF calculation (see commit)"
  },
  {
    "objectID": "src/daily_journal.html#section-11",
    "href": "src/daily_journal.html#section-11",
    "title": "Daily Journal",
    "section": "08.12.2025",
    "text": "08.12.2025\n\nContinued the DIPY prediction documentation example (see commit)"
  },
  {
    "objectID": "src/daily_journal.html#section-12",
    "href": "src/daily_journal.html#section-12",
    "title": "Daily Journal",
    "section": "09.12.2025",
    "text": "09.12.2025\n\nMeeting with Prof. Esteban\nRemoved the gqi2 method and b0 volumes from the prediction tests (see commit)\nRemoved gqi_cross_voxel_notebook + Removed b0 values from train set in gqi_roundtrip_notebook + Cleaned gqi_unseen_data_notebook (see commit)"
  },
  {
    "objectID": "src/daily_journal.html#section-13",
    "href": "src/daily_journal.html#section-13",
    "title": "Daily Journal",
    "section": "10.12.2025",
    "text": "10.12.2025\n\nCleaned the gqi_unseen_data_notebook (see commit)\nContinued the DIPY prediction documentation example (see commit and example)"
  },
  {
    "objectID": "src/daily_journal.html#section-14",
    "href": "src/daily_journal.html#section-14",
    "title": "Daily Journal",
    "section": "11.12.2025",
    "text": "11.12.2025\n\nUpdated README + Worked on the presentation (see commit)"
  },
  {
    "objectID": "src/daily_journal.html#section-15",
    "href": "src/daily_journal.html#section-15",
    "title": "Daily Journal",
    "section": "12.12.2025",
    "text": "12.12.2025\n\nApplied the changes requested by the DIPY team on the Prof. Esteban repository PR (see related gqi and test_gqi commit, related gqi_predict example commit and example)"
  },
  {
    "objectID": "src/daily_journal.html#section-16",
    "href": "src/daily_journal.html#section-16",
    "title": "Daily Journal",
    "section": "13.12.2025",
    "text": "13.12.2025\n\nCleaned the GeneralizedQSamplingFit predict roundtrip tests (see commit)\nBegan the Testing Methodology and Obtained Results sections of the report (see report)\nImproved marimo notebooks plot titles (see gqi roundtrip notebook, gqi unseen data notebook and commit)"
  },
  {
    "objectID": "src/daily_journal.html#section-17",
    "href": "src/daily_journal.html#section-17",
    "title": "Daily Journal",
    "section": "14.12.2025",
    "text": "14.12.2025\n\nContinued the report, improved the index page and added references (see commit and project website)\nContinued working on the presentation (see commit and presentation)"
  }
]